doctype html
html(lang='en')
  head
  title #{title} : Node Auth
  meta(charset='utf-8')
  meta(name='viewport', content='width=device-width, initial-scale=1')
  meta(name="theme-color" content="#474b4F")
  meta(name="msapplication-navbutton-color" content="#474b4F")
  meta(name="apple-mobile-web-app-status-bar-style" content="#474b4F")
  link(rel='stylesheet' href='/stylesheets/style.css')
  link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")
  link(rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css')
  link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/octicons/4.4.0/font/octicons.css')
  link(href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500" rel="stylesheet")
  link(rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css")
  script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js')
  script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js')
  script(type="text/javascript" src="http://twitter.github.io/bootstrap/assets/js/bootstrap-transition.js")
  script(type="text/javascript" src="http://twitter.github.io/bootstrap/assets/js/bootstrap-collapse.js")
  script(src="https://unpkg.com/infinite-scroll@3/dist/infinite-scroll.pkgd.min.js")  
  script(src='/javascripts/main.js')
  
  body
    if (title==='Login'||title==='Register')
      nav.navbar.navbar-inverse
        .container-fluid
          .navbar-header
            button.navbar-toggle(type='button', data-toggle='collapse', data-target='#myNavbar')
              span.icon-bar
              span.icon-bar
              span.icon-bar
            a.navbar-brand(href='/') UniHub
          #myNavbar.collapse.navbar-collapse
            if !user
              ul.nav.navbar-nav.navbar-right
                li(class=(title == 'Register' ? 'active' : ''))
                  a(href='/users/register')
                    span.glyphicon.glyphicon-user
                    |  Sign Up
                li(class=(title == 'Login' ? 'active' : ''))
                  a(href='/users/login')
                    span.glyphicon.glyphicon-log-in
                    |  Login  
    else
      nav.navbar.navbar-inverse(data-spy="affix" style="width:100%;z-index:10000;")
        .container-fluid
          .navbar-header
            button.navbar-toggle(type='button', data-toggle='collapse', data-target='#myNavbar')
              span.icon-bar
              span.icon-bar
              span.icon-bar
            a.navbar-brand(href='/') UniHub
          #myNavbar.collapse.navbar-collapse
            if user
              .col-lg-6
               form.input-group(id="searchorgform" method='get')
                  input.form-control(type='text', placeholder='Enter organisation UID or name' id="orgquery")
                  span.input-group-btn
                    button.btn.btn-secondary#searchorg(type='button')
                      i(class="fa fa-search")
              .col-lg-6
                ul.nav.navbar-nav.navbar-right(style="font-size:12pt!important;font-weight:500;")
                  li(class=(title == 'Home' ? 'active' : '') style="display:inline-flex")
                    a(href='/')
                      i( class="ionicons ion-android-home" style="font-size:20pt!important;")
                    
                  li(class=(title == 'Join Organisations' ? 'active' : '') id="exploreorg")
                    a(href='/searchorg/q' )
                      | Explore
                  
                  li(class=(title == 'My Organisations' ? 'active' : '') id="myorganisation")
                    a(href='/myorg/' )
                      | My Organisations
                  
                  li(class=(title == 'Profile' ? 'active' : '') id="myprofile")
                    a(href='/profile/'+user.username )
                      | My profile


                  li(class=(title == 'My Organisations' ? 'active' : ''))
                    a(href='/myorg')
                      i(class="ionicons ion-ios-people" style="font-size:20pt!important;")
                  
                  li(class=(title == 'Settings' ? 'active' : ''))
                    a(href='/settings/')
                      i(class="ionicons ion-android-settings" style="font-size:20pt!important;")
                  
                  li(class=(title == 'help' ? 'active' : ''))
                      a(href='/settings/')
                        i(class="ionicons ion-help-circled" style="font-size:20pt!important;")
              
                  li(class=(title == 'Logout' ? 'active' : ''))
                    a(href='/users/logout')
                      i(class="ionicons ion-log-out" style="font-size:20pt!important;")        
    block content

    script.
      $('input').attr('autocomplete', 'off'); 
      $('#searchorg').click(function(){
        $('#searchorgform').submit();
      });

       $('#orgquery').on("input", function(){
              var query = this.value;
              console.log(query);
              var _url = "/searchorg/"+query;
              $('#searchorgform').attr('action', _url);       
       });